package encoding

import (
	"testing"

	"github.com/ethereum/go-ethereum/common/hexutil"
	"gopkg.in/go-playground/assert.v1"
)

func Test_EncodeABISignalProof(t *testing.T) {
	// nolint: lll
	merkleProof := []byte{0xff}

	s := SignalProof{
		Height:      uint64(1),
		MerkleProof: merkleProof,
		Hops:        []Hop{},
	}

	// nolint: lll
	want := "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	proof, err := EncodeSignalProof(s)
	assert.Equal(t, nil, err)
	assert.Equal(t, hexutil.Encode(proof), want)
}
